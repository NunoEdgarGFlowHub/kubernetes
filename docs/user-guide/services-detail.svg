<svg xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg" id="svg2" width="744.094" height="1052.362" version="1.1"><metadata id="metadata7"/><g id="layer1"><g id="g4178-3-98" transform="matrix(1,0,0,-1.1300076,-23.256225,1365.3668)"><path style="fill:none;stroke:#000;stroke-width:2.82215285;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none" id="path4174-3-7" d="m 337.14286,757.95172 c 0,-71.30383 0,-71.30383 0,-71.30383"/><path style="fill:#000;fill-opacity:1;stroke:#000;stroke-width:2.82215309;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none" id="path4176-9-8" d="m 300.19689,758.79077 8.66026,-15 8.66025,15 z" transform="translate(28.571429,-62.857143)"/></g><g id="g4324"><path style="fill:none;stroke:#000;stroke-width:2.99999976;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none" id="path4174-3-2" d="M 340.43856,497.06486 C 238.47092,383.2788 238.47092,383.2788 238.47092,383.2788"/><path style="fill:#000;fill-opacity:1;stroke:#000;stroke-width:2.82215309;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none" id="path4176-9-9" d="m 300.19689,758.79077 8.66026,-15 8.66025,15 z" transform="matrix(0.74560707,-0.66638585,0.75302107,0.84254166,-563.80429,-49.094063)"/></g><g id="g4324-8" transform="matrix(-1,0,0,1,718.68427,0.32076964)"><path style="fill:none;stroke:#000;stroke-width:2.99999976;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none" id="path4174-3-2-7" d="M 340.43856,497.06486 C 238.47092,383.2788 238.47092,383.2788 238.47092,383.2788"/><path style="fill:#000;fill-opacity:1;stroke:#000;stroke-width:2.82215309;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none" id="path4176-9-9-3" d="m 300.19689,758.79077 8.66026,-15 8.66025,15 z" transform="matrix(0.74560707,-0.66638585,0.75302107,0.84254166,-563.80429,-49.094063)"/></g><g id="g4178-3-9" transform="matrix(1,0,0,1.3566066,10.430689,-549.99231)"><path style="fill:none;stroke:#000;stroke-width:2.57569385;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none" id="path4174-3-8" d="m 337.14286,757.95172 c 0,-71.30383 0,-71.30383 0,-71.30383"/><path style="fill:#000;fill-opacity:1;stroke:#000;stroke-width:2.57569408;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none" id="path4176-9-5" d="m 300.19689,758.79077 8.66026,-15 8.66025,15 z" transform="translate(28.571429,-62.857143)"/></g><g id="g4178" transform="matrix(1,0,0,0.83995083,5.8686441,145.11325)"><path style="fill:none;stroke:#000;stroke-width:3.27336383;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none" id="path4174" d="m 337.14286,757.95172 c 0,-71.30383 0,-71.30383 0,-71.30383"/><path style="fill:#000;fill-opacity:1;stroke:#000;stroke-width:3.27336407;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none" id="path4176" d="m 300.19689,758.79077 8.66026,-15 8.66025,15 z" transform="translate(28.571429,-62.857143)"/></g><g id="g3937" transform="translate(-27.782873,191.54649)"><g id="g3868" transform="translate(0,6.5250001e-6)"><rect style="fill:#85bff1;fill-opacity:1;stroke:#000;stroke-width:2;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none" id="rect2985" width="224.286" height="118.571" x="30" y="60.934"/><g id="g3861"><text id="text3755" x="36.711" y="91.846" xml:space="preserve" style="font-size:40px;font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;line-height:125%;letter-spacing:0;word-spacing:0;fill:#000;fill-opacity:1;stroke:none;font-family:Ubuntu Mono;-inkscape-font-specification:Ubuntu Mono"><tspan style="font-size:32px;text-align:start;text-anchor:start" id="tspan3757" x="36.711" y="91.846">Backend Pod 1</tspan></text><text id="text3855" x="37.143" y="130.934" xml:space="preserve" style="font-size:40px;font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;line-height:125%;letter-spacing:0;word-spacing:0;fill:#000;fill-opacity:1;stroke:none;font-family:Ubuntu Mono;-inkscape-font-specification:Ubuntu Mono"><tspan style="font-size:24px" id="tspan3857" x="37.143" y="130.934">labels: app=MyApp</tspan><tspan id="tspan3859" x="37.143" y="160.934" style="font-size:24px">port: 9376</tspan></text></g></g><g id="g3868-7" transform="translate(246.07142,6.5250001e-6)"><rect style="fill:#85bff1;fill-opacity:1;stroke:#000;stroke-width:2;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none" id="rect2985-1" width="224.286" height="118.571" x="30" y="60.934"/><g id="g3861-9"><text id="text3755-3" x="36.711" y="91.846" xml:space="preserve" style="font-size:40px;font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;line-height:125%;letter-spacing:0;word-spacing:0;fill:#000;fill-opacity:1;stroke:none;font-family:Ubuntu Mono;-inkscape-font-specification:Ubuntu Mono"><tspan style="font-size:32px;text-align:start;text-anchor:start" id="tspan3757-5" x="36.711" y="91.846">Backend Pod 2</tspan></text><text id="text3855-6" x="37.143" y="130.934" xml:space="preserve" style="font-size:40px;font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;line-height:125%;letter-spacing:0;word-spacing:0;fill:#000;fill-opacity:1;stroke:none;font-family:Ubuntu Mono;-inkscape-font-specification:Ubuntu Mono"><tspan style="font-size:24px" id="tspan3857-1" x="37.143" y="130.934">labels: app=MyApp</tspan><tspan id="tspan3859-9" x="37.143" y="160.934" style="font-size:24px">port: 9376</tspan></text></g></g><g id="g3868-3" transform="translate(492.14285,6.5250001e-6)"><rect style="fill:#85bff1;fill-opacity:1;stroke:#000;stroke-width:2;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none" id="rect2985-2" width="224.286" height="118.571" x="30" y="60.934"/><g id="g3861-3"><text id="text3755-5" x="36.711" y="91.846" xml:space="preserve" style="font-size:40px;font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;line-height:125%;letter-spacing:0;word-spacing:0;fill:#000;fill-opacity:1;stroke:none;font-family:Ubuntu Mono;-inkscape-font-specification:Ubuntu Mono"><tspan style="font-size:32px;text-align:start;text-anchor:start" id="tspan3757-2" x="36.711" y="91.846">Backend Pod 3</tspan></text><text id="text3855-4" x="37.143" y="130.934" xml:space="preserve" style="font-size:40px;font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;line-height:125%;letter-spacing:0;word-spacing:0;fill:#000;fill-opacity:1;stroke:none;font-family:Ubuntu Mono;-inkscape-font-specification:Ubuntu Mono"><tspan style="font-size:24px" id="tspan3857-7" x="37.143" y="130.934">labels: app=MyApp</tspan><tspan id="tspan3859-7" x="37.143" y="160.934" style="font-size:24px">port: 9376</tspan></text></g></g></g><g id="g4178-3-4" transform="matrix(-0.5569815,0.8305249,-0.93849945,-0.62939332,1043.1434,624.89979)"><path style="fill:none;stroke:#000;stroke-width:2.82215285;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none" id="path4174-3-9" d="m 337.14286,757.95172 c 0,-71.30383 0,-71.30383 0,-71.30383"/><path style="fill:#000;fill-opacity:1;stroke:#000;stroke-width:2.82215309;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none" id="path4176-9-1" d="m 300.19689,758.79077 8.66026,-15 8.66025,15 z" transform="translate(28.571429,-62.857143)"/></g><g id="g4178-3" transform="matrix(1,0,0,1.1300076,19.868644,-230.41621)"><path style="fill:none;stroke:#000;stroke-width:2.82215285;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none" id="path4174-3" d="m 337.14286,757.95172 c 0,-71.30383 0,-71.30383 0,-71.30383"/><path style="fill:#000;fill-opacity:1;stroke:#000;stroke-width:2.82215309;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none" id="path4176-9" d="m 300.19689,758.79077 8.66026,-15 8.66025,15 z" transform="translate(28.571429,-62.857143)"/></g><g id="g4090" transform="translate(9.4642913,66)"><rect id="rect2985-4" width="224.286" height="58.571" x="221.786" y="704.505" style="fill:#f1cb85;fill-opacity:1;stroke:#000;stroke-width:2;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none"/><g id="g3861-6" transform="translate(249.2817,652.74516)"><text style="font-size:40px;font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;line-height:125%;letter-spacing:0;word-spacing:0;fill:#000;fill-opacity:1;stroke:none;font-family:Ubuntu Mono;-inkscape-font-specification:Ubuntu Mono" id="text3755-32" x="36.711" y="91.846" xml:space="preserve"><tspan id="tspan3757-9" x="36.711" y="91.846" style="font-size:32px;text-align:start;text-anchor:start">Client</tspan></text></g></g><g id="g4114" transform="translate(24.285715,159.42857)"><path style="fill:#ededed;fill-opacity:1;stroke:#000;stroke-width:1.99999988;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none" id="path4096" d="m 282.87054,438.5755 c -23.66935,0 -42.875,11.54365 -42.875,25.78345 0,1.69709 0.29232,3.36317 0.8125,4.96869 -5.77989,-1.60822 -12.0611,-2.49777 -18.65625,-2.49777 -28.00873,0 -50.71875,15.92203 -50.71875,35.58653 0,19.66449 22.71002,35.61339 50.71875,35.61339 9.72296,0 18.78316,-1.93319 26.5,-5.26412 10.70208,13.21239 35.10628,22.45308 63.5,22.45308 23.13948,0 43.60406,-6.13049 56.1875,-15.55064 12.16376,6.53313 29.85326,10.63567 49.53125,10.63567 36.68749,0 66.40625,-14.27678 66.40625,-31.90702 0,-17.63023 -29.71876,-31.93387 -66.40625,-31.93387 -0.61492,0 -1.23284,0.0189 -1.84375,0.0268 0.72778,-1.79609 1.125,-3.66107 1.125,-5.55955 0,-15.93503 -26.86291,-28.84524 -60,-28.84524 -12.3074,0 -23.75966,1.77775 -33.28125,4.8344 -5.31552,-10.60488 -21.63938,-18.34385 -41,-18.34385 z"/><text style="font-size:40px;font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;line-height:125%;letter-spacing:0;word-spacing:0;fill:#000;fill-opacity:1;stroke:none;font-family:Ubuntu Mono;-inkscape-font-specification:Ubuntu Mono" id="text4108" x="270.393" y="507.152" xml:space="preserve"><tspan id="tspan4112" x="270.393" y="507.152" style="font-size:22px">iptables</tspan></text></g><g id="g4168" transform="translate(167.67856,-111.42858)"><rect id="rect2985-4-0" width="250" height="58.571" x="50.714" y="588.791" style="fill:#b9f185;fill-opacity:1;stroke:#000;stroke-width:2;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none"/><g id="g3861-6-2" transform="translate(58.491433,534.63087)"><text style="font-size:40px;font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;line-height:125%;letter-spacing:0;word-spacing:0;fill:#000;fill-opacity:1;stroke:none;font-family:Ubuntu Mono;-inkscape-font-specification:Ubuntu Mono" id="text3755-32-8" x="36.711" y="91.846" xml:space="preserve"><tspan id="tspan3757-9-4" x="36.711" y="91.846" style="font-size:32px;text-align:start;text-anchor:start">kube-proxy</tspan></text></g></g><g id="g4168-5" transform="translate(-102.23193,-119.15421)"><g id="g4238" transform="translate(22.087429,-86.34177)"><rect style="fill:#edc1f8;fill-opacity:1;stroke:#000;stroke-width:2;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none" id="rect2985-4-0-6" width="191.77" height="58.571" x="51.87" y="588.791"/><g id="g3861-6-2-6" transform="translate(39.107429,534.26287)"><text id="text3755-32-8-8" x="36.711" y="91.846" xml:space="preserve" style="font-size:40px;font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;line-height:125%;letter-spacing:0;word-spacing:0;fill:#000;fill-opacity:1;stroke:none;font-family:Ubuntu Mono;-inkscape-font-specification:Ubuntu Mono"><tspan style="font-size:32px;text-align:start;text-anchor:start" id="tspan3757-9-4-1" x="36.711" y="91.846">apiserver</tspan></text></g></g></g><text style="font-size:40px;font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;line-height:125%;letter-spacing:0;word-spacing:0;fill:#000;fill-opacity:1;stroke:none;font-family:Ubuntu Mono;-inkscape-font-specification:Ubuntu Mono" id="text4777" x="354.031" y="752.174" xml:space="preserve"><tspan id="tspan4779" x="354.031" y="752.174" style="font-size:22px">3) connect to 10.0.0.1:1234</tspan></text><text style="font-size:40px;font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;line-height:125%;letter-spacing:0;word-spacing:0;fill:#000;fill-opacity:1;stroke:none;font-family:Ubuntu Mono;-inkscape-font-specification:Ubuntu Mono" id="text4777-1" x="381.814" y="563.219" xml:space="preserve"><tspan style="font-size:22px" id="tspan4804" x="381.814" y="563.219">4) redirect to (random)</tspan><tspan style="font-size:22px" id="tspan3060" x="381.814" y="590.719">proxy port</tspan></text><text style="font-size:40px;font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;line-height:125%;letter-spacing:0;word-spacing:0;fill:#000;fill-opacity:1;stroke:none;font-family:Ubuntu Mono;-inkscape-font-specification:Ubuntu Mono" id="text4777-1-3" x="-11.495" y="476.924" xml:space="preserve"><tspan style="font-size:22px" id="tspan4804-8" x="-11.495" y="476.924">1) watch Services </tspan><tspan style="font-size:22px" id="tspan3056" x="-11.495" y="504.424">and Endpoints</tspan></text><text style="font-size:40px;font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;line-height:125%;letter-spacing:0;word-spacing:0;fill:#000;fill-opacity:1;stroke:none;font-family:Ubuntu Mono;-inkscape-font-specification:Ubuntu Mono" id="text4777-1-3-5" x="53.554" y="557.187" xml:space="preserve"><tspan style="font-size:22px" id="tspan4804-8-5" x="53.554" y="557.187">2) open proxy port </tspan><tspan style="font-size:22px" id="tspan3058" x="53.554" y="584.687">and set portal rules</tspan></text><text style="font-size:40px;font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;line-height:125%;letter-spacing:0;word-spacing:0;fill:#000;fill-opacity:1;stroke:none;font-family:Ubuntu Mono;-inkscape-font-specification:Ubuntu Mono" id="text4777-1-2" x="450.639" y="442.091" xml:space="preserve"><tspan style="font-size:22px" id="tspan4804-9" x="450.639" y="442.091">5) proxy to a backend</tspan></text></g></svg>